<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">

    <title>Tree Example</title>

    <style>

	.node {
		cursor: pointer;
	}

	.node circle {
	  fill: #fff;
	  stroke: steelblue;
	  stroke-width: 3px;
	}

	.node text {
	  font: 12px sans-serif;
	}

	.link {
	  fill: none;
	  stroke: #ccc;
	  stroke-width: 2px;
	}

    </style>

  </head>

  <body>

<!-- load the d3.js library -->
<script src="http://d3js.org/d3.v3.min.js"></script>


<script>


var treeData = [
    {"name": "0", "parent": "null", "children": [{"name": 1, "parent": "0", "children": []}, {"name": 2, "parent": "0", "children": [{"name": 12, "parent": 2, "children": [{"name": 40, "parent": 12, "children": [{"name": 76, "parent": 40, "children": [{"name": 120, "parent": 76, "children": [{"name": 178, "parent": 120, "children": [{"name": 238, "parent": 178, "children": [{"name": 316, "parent": 238, "children": [{"name": 400, "parent": 316, "children": [{"name": 452, "parent": 400, "children": [{"name": 480, "parent": 452, "children": []}, {"name": 481, "parent": 452, "children": []}]}]}]}, {"name": 317, "parent": 238, "children": []}]}]}, {"name": 179, "parent": 120, "children": [{"name": 240, "parent": 179, "children": [{"name": 319, "parent": 240, "children": [{"name": 403, "parent": 319, "children": [{"name": 454, "parent": 403, "children": [{"name": 483, "parent": 454, "children": []}, {"name": 484, "parent": 454, "children": []}]}]}]}, {"name": 320, "parent": 240, "children": []}]}]}]}, {"name": 121, "parent": 76, "children": [{"name": 181, "parent": 121, "children": [{"name": 242, "parent": 181, "children": [{"name": 322, "parent": 242, "children": []}, {"name": 323, "parent": 242, "children": []}]}]}, {"name": 182, "parent": 121, "children": [{"name": 244, "parent": 182, "children": [{"name": 325, "parent": 244, "children": []}, {"name": 326, "parent": 244, "children": []}]}]}]}, {"name": 122, "parent": 76, "children": [{"name": 184, "parent": 122, "children": [{"name": 246, "parent": 184, "children": [{"name": 328, "parent": 246, "children": [{"name": 410, "parent": 328, "children": [{"name": 456, "parent": 410, "children": [{"name": 486, "parent": 456, "children": []}, {"name": 487, "parent": 456, "children": []}]}]}]}, {"name": 329, "parent": 246, "children": []}]}]}]}, {"name": 123, "parent": 76, "children": [{"name": 186, "parent": 123, "children": [{"name": 248, "parent": 186, "children": [{"name": 331, "parent": 248, "children": []}, {"name": 332, "parent": 248, "children": []}]}]}]}, {"name": 124, "parent": 76, "children": []}, {"name": 125, "parent": 76, "children": []}]}]}]}, {"name": 13, "parent": 2, "children": [{"name": 42, "parent": 13, "children": [{"name": 78, "parent": 42, "children": [{"name": 127, "parent": 78, "children": [{"name": 190, "parent": 127, "children": [{"name": 250, "parent": 190, "children": [{"name": 334, "parent": 250, "children": [{"name": 415, "parent": 334, "children": [{"name": 458, "parent": 415, "children": [{"name": 489, "parent": 458, "children": []}]}, {"name": 459, "parent": 415, "children": []}]}]}]}, {"name": 251, "parent": 190, "children": [{"name": 336, "parent": 251, "children": [{"name": 417, "parent": 336, "children": [{"name": 461, "parent": 417, "children": []}, {"name": 462, "parent": 417, "children": []}]}]}]}, {"name": 252, "parent": 190, "children": []}, {"name": 253, "parent": 190, "children": []}]}]}]}, {"name": 79, "parent": 42, "children": [{"name": 129, "parent": 79, "children": [{"name": 192, "parent": 129, "children": [{"name": 255, "parent": 192, "children": [{"name": 340, "parent": 255, "children": []}]}]}, {"name": 193, "parent": 129, "children": [{"name": 257, "parent": 193, "children": [{"name": 342, "parent": 257, "children": []}]}]}]}]}]}]}, {"name": 14, "parent": 2, "children": [{"name": 44, "parent": 14, "children": [{"name": 81, "parent": 44, "children": [{"name": 131, "parent": 81, "children": [{"name": 195, "parent": 131, "children": [{"name": 259, "parent": 195, "children": [{"name": 344, "parent": 259, "children": [{"name": 421, "parent": 344, "children": [{"name": 464, "parent": 421, "children": []}]}]}]}, {"name": 260, "parent": 195, "children": [{"name": 346, "parent": 260, "children": [{"name": 423, "parent": 346, "children": [{"name": 466, "parent": 423, "children": []}]}]}]}, {"name": 261, "parent": 195, "children": []}, {"name": 262, "parent": 195, "children": []}]}]}]}, {"name": 82, "parent": 44, "children": [{"name": 133, "parent": 82, "children": [{"name": 197, "parent": 133, "children": [{"name": 264, "parent": 197, "children": []}]}, {"name": 198, "parent": 133, "children": [{"name": 266, "parent": 198, "children": [{"name": 351, "parent": 266, "children": []}]}]}]}]}]}]}, {"name": 15, "parent": 2, "children": [{"name": 46, "parent": 15, "children": [{"name": 84, "parent": 46, "children": [{"name": 135, "parent": 84, "children": [{"name": 200, "parent": 135, "children": [{"name": 268, "parent": 200, "children": [{"name": 353, "parent": 268, "children": [{"name": 426, "parent": 353, "children": []}]}]}, {"name": 269, "parent": 200, "children": [{"name": 355, "parent": 269, "children": [{"name": 428, "parent": 355, "children": []}]}]}, {"name": 270, "parent": 200, "children": []}, {"name": 271, "parent": 200, "children": []}]}]}]}, {"name": 85, "parent": 46, "children": [{"name": 137, "parent": 85, "children": [{"name": 202, "parent": 137, "children": [{"name": 273, "parent": 202, "children": []}]}, {"name": 203, "parent": 137, "children": [{"name": 275, "parent": 203, "children": []}]}]}]}]}]}]}, {"name": 3, "parent": "0", "children": [{"name": 17, "parent": 3, "children": []}, {"name": 18, "parent": 3, "children": [{"name": 49, "parent": 18, "children": [{"name": 87, "parent": 49, "children": []}, {"name": 88, "parent": 49, "children": [{"name": 140, "parent": 88, "children": [{"name": 205, "parent": 140, "children": [{"name": 277, "parent": 205, "children": [{"name": 361, "parent": 277, "children": []}]}]}, {"name": 206, "parent": 140, "children": [{"name": 279, "parent": 206, "children": [{"name": 363, "parent": 279, "children": []}]}]}]}]}]}]}, {"name": 19, "parent": 3, "children": [{"name": 51, "parent": 19, "children": [{"name": 90, "parent": 51, "children": []}, {"name": 91, "parent": 51, "children": [{"name": 143, "parent": 91, "children": [{"name": 208, "parent": 143, "children": [{"name": 281, "parent": 208, "children": []}]}, {"name": 209, "parent": 143, "children": [{"name": 283, "parent": 209, "children": [{"name": 366, "parent": 283, "children": []}]}]}]}]}]}]}, {"name": 20, "parent": 3, "children": [{"name": 53, "parent": 20, "children": [{"name": 93, "parent": 53, "children": []}, {"name": 94, "parent": 53, "children": [{"name": 146, "parent": 94, "children": [{"name": 211, "parent": 146, "children": [{"name": 285, "parent": 211, "children": []}]}, {"name": 212, "parent": 146, "children": [{"name": 287, "parent": 212, "children": []}]}]}]}]}]}]}, {"name": 4, "parent": "0", "children": [{"name": 22, "parent": 4, "children": [{"name": 55, "parent": 22, "children": [{"name": 96, "parent": 55, "children": [{"name": 148, "parent": 96, "children": [{"name": 214, "parent": 148, "children": [{"name": 289, "parent": 214, "children": [{"name": 370, "parent": 289, "children": [{"name": 433, "parent": 370, "children": [{"name": 470, "parent": 433, "children": [{"name": 496, "parent": 470, "children": []}, {"name": 497, "parent": 470, "children": []}]}]}]}, {"name": 371, "parent": 289, "children": []}]}]}]}, {"name": 149, "parent": 96, "children": [{"name": 216, "parent": 149, "children": [{"name": 291, "parent": 216, "children": [{"name": 373, "parent": 291, "children": []}, {"name": 374, "parent": 291, "children": []}]}]}]}, {"name": 150, "parent": 96, "children": []}, {"name": 151, "parent": 96, "children": []}]}]}]}, {"name": 23, "parent": 4, "children": [{"name": 57, "parent": 23, "children": [{"name": 98, "parent": 57, "children": [{"name": 153, "parent": 98, "children": [{"name": 220, "parent": 153, "children": [{"name": 293, "parent": 220, "children": [{"name": 376, "parent": 293, "children": [{"name": 438, "parent": 376, "children": [{"name": 472, "parent": 438, "children": []}]}]}]}, {"name": 294, "parent": 220, "children": [{"name": 378, "parent": 294, "children": [{"name": 440, "parent": 378, "children": [{"name": 474, "parent": 440, "children": []}]}]}]}, {"name": 295, "parent": 220, "children": []}, {"name": 296, "parent": 220, "children": []}]}]}]}, {"name": 99, "parent": 57, "children": [{"name": 155, "parent": 99, "children": [{"name": 222, "parent": 155, "children": [{"name": 298, "parent": 222, "children": [{"name": 382, "parent": 298, "children": []}]}]}]}]}]}]}, {"name": 24, "parent": 4, "children": [{"name": 59, "parent": 24, "children": [{"name": 101, "parent": 59, "children": [{"name": 157, "parent": 101, "children": [{"name": 224, "parent": 157, "children": [{"name": 300, "parent": 224, "children": [{"name": 384, "parent": 300, "children": [{"name": 443, "parent": 384, "children": []}]}]}, {"name": 301, "parent": 224, "children": [{"name": 386, "parent": 301, "children": [{"name": 445, "parent": 386, "children": []}]}]}, {"name": 302, "parent": 224, "children": []}, {"name": 303, "parent": 224, "children": []}]}]}]}, {"name": 102, "parent": 59, "children": [{"name": 159, "parent": 102, "children": [{"name": 226, "parent": 159, "children": [{"name": 305, "parent": 226, "children": []}]}]}]}]}]}]}, {"name": 5, "parent": "0", "children": [{"name": 26, "parent": 5, "children": []}, {"name": 27, "parent": 5, "children": [{"name": 62, "parent": 27, "children": [{"name": 104, "parent": 62, "children": []}, {"name": 105, "parent": 62, "children": [{"name": 162, "parent": 105, "children": [{"name": 228, "parent": 162, "children": [{"name": 307, "parent": 228, "children": [{"name": 391, "parent": 307, "children": []}]}]}]}]}]}]}, {"name": 28, "parent": 5, "children": [{"name": 64, "parent": 28, "children": [{"name": 107, "parent": 64, "children": []}, {"name": 108, "parent": 64, "children": [{"name": 165, "parent": 108, "children": [{"name": 230, "parent": 165, "children": [{"name": 309, "parent": 230, "children": []}]}]}]}]}]}]}, {"name": 6, "parent": "0", "children": [{"name": 30, "parent": 6, "children": [{"name": 66, "parent": 30, "children": [{"name": 110, "parent": 66, "children": [{"name": 167, "parent": 110, "children": []}, {"name": 168, "parent": 110, "children": []}]}]}]}, {"name": 31, "parent": 6, "children": [{"name": 68, "parent": 31, "children": [{"name": 112, "parent": 68, "children": [{"name": 170, "parent": 112, "children": [{"name": 234, "parent": 170, "children": [{"name": 311, "parent": 234, "children": [{"name": 394, "parent": 311, "children": [{"name": 448, "parent": 394, "children": []}]}]}, {"name": 312, "parent": 234, "children": [{"name": 396, "parent": 312, "children": [{"name": 450, "parent": 396, "children": []}]}]}, {"name": 313, "parent": 234, "children": []}, {"name": 314, "parent": 234, "children": []}]}]}]}, {"name": 113, "parent": 68, "children": [{"name": 172, "parent": 113, "children": []}]}]}]}]}, {"name": 7, "parent": "0", "children": [{"name": 33, "parent": 7, "children": []}, {"name": 34, "parent": 7, "children": [{"name": 71, "parent": 34, "children": [{"name": 115, "parent": 71, "children": []}, {"name": 116, "parent": 71, "children": [{"name": 175, "parent": 116, "children": []}]}]}]}]}, {"name": 8, "parent": "0", "children": [{"name": 36, "parent": 8, "children": [{"name": 73, "parent": 36, "children": [{"name": 118, "parent": 73, "children": []}]}]}]}, {"name": 9, "parent": "0", "children": [{"name": 38, "parent": 9, "children": []}]}]}
];

// ************** Generate the tree diagram	 *****************
var margin = {top: 20, right: 120, bottom: 20, left: 120},
	width = 960 - margin.right - margin.left,
	height = 500 - margin.top - margin.bottom;


var i = 0,
	duration = 750,
	root;

var tree = d3.layout.tree()
	.size([height, width]);

var diagonal = d3.svg.diagonal()
	.projection(function(d) { return [d.y, d.x]; });

var svg = d3.select("body").append("svg")
	.attr("width", width + margin.right + margin.left)
	.attr("height", height + margin.top + margin.bottom)
  .append("g")
	.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

root = treeData[0];
root.x0 = height / 2;
root.y0 = 0;

update(root);

d3.select(self.frameElement).style("height", "500px");

function update(source) {

  // Compute the new tree layout.
  var nodes = tree.nodes(root).reverse(),
	  links = tree.links(nodes);

  // Normalize for fixed-depth.
  nodes.forEach(function(d) { d.y = d.depth * 180; });

  // Update the nodes…
  var node = svg.selectAll("g.node")
	  .data(nodes, function(d) { return d.id || (d.id = ++i); });

  // Enter any new nodes at the parent's previous position.
  var nodeEnter = node.enter().append("g")
	  .attr("class", "node")
	  .attr("transform", function(d) { return "translate(" + source.y0 + "," + source.x0 + ")"; })
	  .on("click", click);

  nodeEnter.append("circle")
	  .attr("r", 1e-6)
	  .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; });

  nodeEnter.append("text")
	  .attr("x", function(d) { return d.children || d._children ? -13 : 13; })
	  .attr("dy", ".35em")
	  .attr("text-anchor", function(d) { return d.children || d._children ? "end" : "start"; })
	  .text(function(d) { return d.name; })
	  .style("fill-opacity", 1e-6);

  // Transition nodes to their new position.
  var nodeUpdate = node.transition()
	  .duration(duration)
	  .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; });

  nodeUpdate.select("circle")
	  .attr("r", 10)
	  .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; });

  nodeUpdate.select("text")
	  .style("fill-opacity", 1);

  // Transition exiting nodes to the parent's new position.
  var nodeExit = node.exit().transition()
	  .duration(duration)
	  .attr("transform", function(d) { return "translate(" + source.y + "," + source.x + ")"; })
	  .remove();

  nodeExit.select("circle")
	  .attr("r", 1e-6);

  nodeExit.select("text")
	  .style("fill-opacity", 1e-6);

  // Update the links…
  var link = svg.selectAll("path.link")
	  .data(links, function(d) { return d.target.id; });

  // Enter any new links at the parent's previous position.
  link.enter().insert("path", "g")
	  .attr("class", "link")
	  .attr("d", function(d) {
		var o = {x: source.x0, y: source.y0};
		return diagonal({source: o, target: o});
	  });

  // Transition links to their new position.
  link.transition()
	  .duration(duration)
	  .attr("d", diagonal);

  // Transition exiting nodes to the parent's new position.
  link.exit().transition()
	  .duration(duration)
	  .attr("d", function(d) {
		var o = {x: source.x, y: source.y};
		return diagonal({source: o, target: o});
	  })
	  .remove();

  // Stash the old positions for transition.
  nodes.forEach(function(d) {
	d.x0 = d.x;
	d.y0 = d.y;
  });
}

// Toggle children on click.
function click(d) {
  if (d.children) {
	d._children = d.children;
	d.children = null;
  } else {
	d.children = d._children;
	d._children = null;
  }
  update(d);
}

</script>

  <input value="start" onclick="alert('Клик!')" type="button">

  </body>
</html>
LICENSE